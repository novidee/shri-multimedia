# Домашнее задание "мультимедия"

## Как запустить
Для запуска необходимо запустить сервер с видеопотоками, инструкция по [ссылке](https://yadi.sk/i/shdHcVlkd_BO1w%5D). Затем в корне проекта выполнить команды
```
npm i
npm start
```
Сайт станет доступен по адресу http://localhost:8080

## Комментарии
- Открытие видео сделано через изменение transform (translate, scale)
- Для фильтров яркости и контрастности используются css фильтры, т.к. реализуются они достаточно просто и не блокируют основной поток
- Для анализа звука используется один анализатор и четыре источника. К анализатору подключен источник открытого видео
- Громкость отображается в виде столбчатой диаграммы частот с использованием canvas
- Контролы яркости и контрастности на странице одни и отображают значения текущего открытого видео
- Анализатор освещенности определяет значение по среднему значению серого каждого кадра
- Алгоритм детектинга движения анализирует разницу интенсивности цвета каждого пикселя между текущим кадром и предыдущим.
Строится прямоугольник на области, где разница интенсивности цвета больше определенной дельты. Для оптимизации алгоритма
используется тротлинг - анализ выполняется не для каждого кадра

Для получения данных о пикселях видео текущего кадра используется канвас. Еще одна оптимизация заключается к том, что для анализа
освещенности и обнаружения движения используется один канвас, причем он не рисуется. Также когда нет открытого видео отключаются все операции с canvas и отключается анализ звука. Скрытые видео не вызывают перерисовку браузера за счет visibility: hidden.

Дополнительно старался максимально разделить код и упростить добавление новых анализаторов.
